@use "sass:math";
@use "sass:map";
@use "../../../../assets/styles/screens";
@use "../../../../assets/styles/colors";
@use "../../../../assets/styles/containers";

$font-sizes: (
  default: 32px,
  large: 28px,
  middle: 24px,
  small: 22px,
  xsmall: 20px,
);

$spacings: containers.$paddings-y;
$image-koof: 1;
$subtitle-koof: 0.7;
$line-height: 1.3;
$gap-koof: 0.3;

// Свойства
@for $i from 1 to 5 {
  h#{$i} {
    line-height: $line-height;
    display: grid;
    width: 100%;
    grid-template-areas: "title";
    align-items: center;
    position: relative;
    // Варианты
    & {
      // Картинка
      &.image {
        grid-template-areas: "image title";
      }
      // Подзаголовок
      &.subtitle {
        grid-template-areas: "title" "subtitle";
      }
      // Картинка и подзаголовок
      &.image.subtitle {
        grid-template-areas: "image title" "image subtitle";
      }
    }
    // Адаптив
    @include screens.adaptiveFor($font-sizes, $spacings) using($font-size, $spacing) {
      $image-size: $font-size * (1 + $subtitle-koof) * $line-height * $image-koof;
      // Свойства
      font-size: $font-size;
      padding-bottom: math.div($spacing, 4);
      margin-bottom: math.div($spacing, 4) * 3;
      gap: 0 #{$gap-koof * $font-size};
      grid-template-columns: 1fr;
      // Варианты
      & {
        // Картинка и подзаголовок
        &.image,
        &.image.subtitle {
          grid-template-columns: #{$image-size} 1fr;
        }
      }
      // Картинка
      > .image,
      mat-icon {
        width: $image-size;
        height: $image-size;
      }
      // Иконка
      mat-icon {
        line-height: $image-size;
        font-size: $image-size;
      }
    }

    // Линия в конце
    & {
      $height: 2px;
      $width: 480px;
      $color: map.get(colors.$mat-primary, 700);
      // Общие правила
      &:after {
        content: "";
        display: block;
        position: absolute;
        height: $height;
        border-radius: math.div($height, 2);
        width: $width;
        max-width: 100%;
        bottom: 0;
        left: 0;
        background-image: linear-gradient(to right, transparent 0, $color 10px, $color 50%, transparent 100%);
      }
    }
    // Заголовок
    > sup {
      display: block;
      font-size: inherit;
      font-weight: 400;
      color: colors.$title;
      grid-area: title;
    }
    // Подзаголовок
    > sub {
      display: block;
      font-size: #{$subtitle-koof}em;
      font-weight: 300;
      color: colors.$subtitle;
      grid-area: subtitle;
    }
    // Картинка
    > .image {
      grid-area: image;
      // Картинка
      > img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
    }
    // Иконка
    mat-icon {
      grid-area: image;
      text-align: center;
    }
  }
}
