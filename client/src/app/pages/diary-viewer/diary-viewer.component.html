<div class="section light-gray"
     *ngIf="ready && dream; else pageLoader">
  <!-- Шапка -->
  <app-main-menu #mainMenu
                 [autoCollapse]="true"
                 [imageFullShow]="true"
                 [type]="dream.headerType"
                 [image]="imagePrefix + dream.headerBackground[dream.headerType === _navMenuType.full? 'imageName': 'imageNameShort']"
                 [imagePositionX]="dream.headerBackground.positionX"
                 [imagePositionY]="dream.headerBackground.positionY"
                 [imageOverlay]="dream.headerBackground.imageOverlay"
                 [mainTitle]="dream.title || defaultTitle"
                 subTitle="Приснилось {{(dream.date || today) | date: 'dd MMMM YYYY'}}"
                 [backButtonLink]="backLink"
                 [backButtonLinkParams]="backLinkParams"
                 [floatButtonIcon]="floatButtonData.icon"
                 [floatButtonLink]="floatButtonData.link"
                 [floatButtonLinkParams]="floatButtonData.params"></app-main-menu>

  <!-- Контейнер с данными -->
  <div class="root-section light-gray">
    <div #contentPanel
         class="container content">
      <!-- Контент -->
      <div #leftPanel
           class="content__data"
           [ngStyle]="{ top: leftPanelHelperShift + 'px' }">
        <!-- Карта -->
        <ng-container *ngIf="isMapAvail">
          <div class="dream__map">
            <app-dream-map-viewer [dreamMap]="dream.map"
                                  [debugInfo]="true"></app-dream-map-viewer>
          </div>
        </ng-container>
        <!-- Текст -->
        <ng-container *ngIf="isTextAvail">
          <div class="dream__text"
               [innerHTML]="dream.text"></div>
        </ng-container>
      </div>
      <!-- Комментарии -->
      <div #rightPanel
           class="content__comments"
           [ngStyle]="{ top: rightPanelHelperShift + 'px' }">
        <!-- Редактор -->
        <div class="content__comments-editor">
          <app-comment-editor content
                              [materialType]="commentMaterialType"
                              [materialId]="dream.id"
                              [materialOwner]="dream.user.id"
                              placeholder="Что вы об этом думаете?"
                              [wrapControls]="true"
                              [bottomSmiles]="true"></app-comment-editor>
        </div>
        <!-- Список комментариев -->
        <app-comment-list #commentListElm
                          [materialType]="commentMaterialType"
                          [materialId]="dream.id"></app-comment-list>
      </div>
    </div>
  </div>
</div>

<!-- Лоадер страницы -->
<ng-template #pageLoader>
  <app-page-loader></app-page-loader>
</ng-template>