@use "sass:map";
@use "sass:math";
@use "colors";
@use "screens";
@use "containers";
@use "vars";

// Данные сновидения
.dream {
  $fontSize: 20px;
  $lineHeight: $fontSize * 1.3;
  $textIndent: $fontSize * 2;
  $tablePaddingY: math.div($fontSize, 2);
  $tablePaddingX: $fontSize;
  // Текст
  &__text {
    // Общий стиль
    &,
    ::ng-deep * {
      font-size: $fontSize;
      font-weight: 300;
      line-height: $lineHeight;
      color: colors.$text;
      margin: 0;
    }
    // Абзацы
    ::ng-deep p {
      text-indent: $textIndent;
    }
    // Ссылки
    ::ng-deep a {
      color: map.get(colors.$matPrimary, 400);
      text-decoration: none;
      transition: color #{screens.$animationTime};
      // Наведение машкой
      &:hover {
        color: colors.$text;
      }
    }
    // Жирность
    ::ng-deep b,
    ::ng-deep strong {
      font-weight: 500;
    }
    // Таблица
    ::ng-deep .table {
      margin: 0;
      // Тело
      table {
        max-width: 100%;
        border-collapse: collapse;
        // Ячейки
        td {
          border: 1px solid #{colors.$border};
          padding: #{$tablePaddingY} #{$tablePaddingX};
          background-color: colors.$card;
        }
      }
    }
    // Отступы
    ::ng-deep p,
    ::ng-deep .table {
      & + ::ng-deep p,
      & + ::ng-deep .table {
        margin-top: $lineHeight;
      }
    }
    // Цитата
    ::ng-deep blockquote {
      border-left: 6px solid #{colors.$text};
      margin-left: 0;
      margin-right: 0;
      padding: 1rem;
      padding-right: 0;
      font-style: italic;
    }
    // Последующие блоки
    ::ng-deep > * + * {
      margin-top: $lineHeight;
    }
  }
  // Карта
  &__map {
    width: 100%;
    // Адаптив
    @include screens.adaptiveFor(containers.$paddingsY) using($paddingY) {
      height: calc(100vh - #{vars.$headerHeight + ($paddingY * 2)});
    }
  }
}

// Контент
.content {
  $commentsWidths: (
    default: 100%,
    xlarge: 30%,
    large: 38%,
  );
  // Свойства
  display: flex;
  flex-flow: row wrap;
  justify-content: space-between;
  align-items: flex-start;
  position: relative;
  // Внутренние блоки
  &__data,
  &__comments {
    position: sticky;
  }
  // Блок комментариев
  &__comments {
    display: flex;
    flex-flow: column nowrap;
    justify-content: flex-start;
    align-items: stretch;
    // Блок редактора
    &-editor {
      background-color: colors.$card;
      box-shadow: containers.$cardBoxShadow;
      border-radius: containers.$cardBorderRadius;
      padding-right: containers.$cardPaddingX;
    }
  }
  // Адаптив
  @include screens.adaptiveFor(vars.$userProfileBlocksGaps, $commentsWidths) using($gap, $width) {
    gap: $gap;
    // Блок комментариев
    &__comments {
      gap: $gap;
    }
    // На всю ширину
    @if ($width == 100%) {
      // Внутренние блоки
      &__data,
      &__comments {
        width: 100%;
        position: static;
      }
    }
    // В две колонки
    @else {
      // Данные сновидения
      &__data {
        width: calc(100% - #{$gap} - #{$width});
      }
      // Комментарии
      &__comments {
        width: $width;
      }
    }
  }
}
